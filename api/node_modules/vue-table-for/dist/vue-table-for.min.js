var VueTableFor=function(t,e,r){"use strict";function a(t,e){return Array.apply(null,Array(e-t)).map(function(e,r){return r+t})}function n(t){if(t)return t.replace(/[_-]/g," ").toLowerCase().replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})}function o(t,e){return void 0===t?{}:Object.keys(t).filter(function(r){return e(r,t[r])}).reduce(function(e,r){return e[r]=t[r],e},{})}function s(t,e){return o(t,function(t){return-1===e.indexOf(t)})}function i(t,e){return o(t,function(t){return-1!==e.indexOf(t)})}function u(t,e){return void 0===t?{}:Object.keys(t).filter(function(r){return e(r,t[r])}).reduce(function(e,r){return e[r]=t[r],e},{})}function p(t,e){return u(t,function(t){return-1!==e.indexOf(t)})}var c={props:{columnDefinition:{type:Object,required:!0},header:{type:Object,default:function(){return{}}},recordVariable:{type:String,default:"record"}},functional:!0,render:function(t,r){var a=r.props.columnDefinition,o=a.data.attrs,u=o.name,p=o.header,c=r.props.header;"function"==typeof c&&(c=c(a));var d=s(c,["content","formatter"]),l=i(c,["content","formatter"]);void 0!==p&&("object"==typeof p?(d=Object.assign({},d,s(p,["content","formatter"])),l=Object.assign({},l,i(p,["content","formatter"]))):l.content=p);var g=l.content,f=l.formatter,h=r.slots();return h.default?g=h.default:(void 0===g&&(g=n(u)),"boolean"!=typeof g||g?f&&(g=f(g)):g=null,g=[g]),t(e.RenderWithSlotHooks,{props:{inheritSlots:!0,slotName:u+"_header",tag:"th",tagData:{attrs:d},passSlotsToTag:!1}},g)}},d={functional:!0,props:Object.assign({},i(c.props,["header","recordVariable"])),render:function(t,r){var a,n,o=(r.data.scopedSlots||{}).default,s=r.props.recordVariable;if(o){var u=new Proxy({},{get:function(){return""}});n=o((a={},a[s]=u,a))}else n=r.slots().default;return n=n.filter(function(t){return"td"===t.tag}),t(e.RenderWithSlotHooks,{props:{inheritSlots:!0,slotName:"header",tag:"thead",passSlotsToTag:!1}},t(e.RenderWithSlotHooks,{props:{inheritSlots:!0,slotName:"header_row",tag:"tr",passSlotsToTag:!1}},n.map(function(e){return t(c,{props:Object.assign({},i(r.props,Object.keys(c.props)),{columnDefinition:e})})})))}},l={props:{record:{default:function(){return{}}},name:{type:String,required:!0},field:{type:String,default:null},content:{},formatter:{type:Function},recordVariable:{type:String,default:"record"}},functional:!0,render:function(t,r){var a=r.props,n=a.record,o=a.content,i=a.formatter,u=a.name,p=a.field,c=r.data.scopedSlots||{},d=r.slots().default;p=p||u,void 0===o&&n.hasOwnProperty(p)&&(o=n[p]),i&&void 0!==o&&(o=i(o,Object.assign({},r.data,{record:n})));var l;return l=c.default?c.default({record:n}):d||[o],t(e.RenderWithSlotHooks,{props:{inheritSlots:!0,slotName:u,tag:"td",tagData:s(r.data,["props"]),passSlotsToTag:!1}},l)}},g={functional:!0,props:Object.assign({},{columns:{type:Array,required:!0},dataRow:{default:function(){return{}}}},i(l.props,["record","formatter","recordVariable"])),render:function(t,r){var a=r.props,n=a.columns,o=a.dataRow,u=a.record;return(o="function"==typeof o?o(u):Object.assign({},o)).key||(o.key="record-"+u.id),o.props={record:u},t(e.RenderWithSlotHooks,{props:{inheritSlots:!0,slotName:"data_row",tag:"tr",tagData:o,passSlotsToTag:!1}},n.map(function(e){var a=Object.assign({},e.data,{attrs:s(e.data.attrs,Object.keys(l.props).concat(Object.keys(c.props))),props:Object.assign({},i(r.props,Object.keys(l.props)),i(e.data.attrs,Object.keys(l.props)))});return t(l,a,e.children)}))}},f={props:Object.assign({},{records:{type:Array,required:!0},body:{type:Object,default:function(){return{}}}},i(g.props,["recordVariable","formatter","dataRow"])),functional:!0,render:function(t,r){var a=(r.data.scopedSlots||{}).default,n=r.slots().default,o=r.props,s=o.recordVariable,u=o.records,p=o.body;return t(e.RenderWithSlotHooks,{props:{inheritSlots:!0,slotName:"body",tag:"tbody",tagData:p,passSlotsToTag:!1}},u.map(function(e){var o,u;return u=a?a((o={},o[s]=e,o)):n,u=u.filter(function(t){return"td"===t.tag}),t(g,{props:Object.assign({},{columns:u,record:e},i(r.props,Object.keys(g.props)))})}))}},h=function(t,e,r,a,n,o,s,i){var u=("function"==typeof r?r.options:r)||{};return u.__file="PaginationLinks.vue",u.render||(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),u._scopeId=a,u}({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{attrs:{"aria-label":"Page navigation",align:"right"}},[r("ul",{staticClass:"pagination"},[r("li",{class:{disabled:1===t.currentPage}},[r("a",{attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){e.preventDefault(),t.setPage(t.currentPage-1,e)}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._v(" "),t._l(t.windowedPageNumbers(),function(e){return r("li",{key:"page-"+e,class:{active:e===t.currentPage}},["gap1"===e||"gap2"===e?r("span",{staticClass:"gap"},[t._v("…")]):r("a",{attrs:{href:"#"},on:{click:function(r){r.preventDefault(),t.setPage(e,r)}}},[t._v(t._s(e))])])}),t._v(" "),r("li",{class:{disabled:t.currentPage===t.totalPages}},[r("a",{attrs:{href:"#","aria-label":"Next"},on:{click:function(e){e.preventDefault(),t.setPage(t.currentPage+1,e)}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},staticRenderFns:[]},void 0,{props:{paginationInnerWindow:{type:Number,default:4},paginationOuterWindow:{type:Number,default:1},currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0}},methods:{setPage:function(t,e){void 0===e&&(e=null),t>0&&t<=this.totalPages&&this.$emit("update:currentPage",t),e&&e.target.blur()},windowedPageNumbers:function(){if(0===this.totalPages)return[];var t,e,r,n=this.currentPage-this.paginationInnerWindow,o=this.currentPage+this.paginationInnerWindow;return o>this.totalPages&&(n-=o-this.totalPages,o=this.totalPages),n<1&&(o+=1-n,n=1,o>this.totalPages&&(o=this.totalPages)),t=a(n,o+1),this.paginationOuterWindow+3<t[0]?(e=a(1,this.paginationOuterWindow+2)).push("gap1"):e=a(1,t[0]),this.totalPages-this.paginationOuterWindow-2>t[t.length-1]?(r=a(this.totalPages-this.paginationOuterWindow,this.totalPages+1)).unshift("gap2"):r=a(t[t.length-1]+1,this.totalPages+1),e.concat(t).concat(r)}}},void 0,!1,void 0,void 0,void 0),P={props:Object.assign({},{recordVariable:{type:String,default:"record"},paginationLinksInFooter:{type:Boolean,default:!0},paginated:{type:Boolean,default:!1}},h.props),functional:!0,render:function(t,r){var a,n,o=r.data.scopedSlots||{},s=r.listeners||{},i=o.default,u=r.slots().default,c=r.props,d=c.recordVariable,l=c.paginated,g=c.totalPages;if(i){var f=new Proxy({},{get:function(){return""}});n=i((a={},a[d]=f,a))}else n=u;n=n.filter(function(t){return"td"===t.tag});var P={};return l&&g>1&&!r.slots().footer&&(P.footer=function(){return t("tfoot",[t("tr",[t("td",{attrs:{colspan:n.length}},[t(h,{props:p(r.props,Object.keys(h.props)),on:{"update:currentPage":s["update:currentPage"]}})])])])}),t(e.RenderWithSlotHooks,{props:{inheritSlots:!0,slotName:"footer",tag:null,passSlotsToTag:!1,slotScopeData:{columns:n}},scopedSlots:P})}},b={props:{currentPage:{type:Number,default:1},perPage:{type:Number,default:10},records:{type:Array,required:!0}},computed:{totalPages:function(){return Math.ceil(this.records.length/this.perPage)},currentPageRecords:function(){var t=(this.currentPage-1)*this.perPage;return this.records.slice(t,t+this.perPage)}},watch:{totalPages:{handler:function(){this.$emit("update:totalPages",this.totalPages)},immediate:!0},currentPageRecords:{handler:function(){this.$emit("update:currentPageRecords",this.currentPageRecords)},immediate:!0}},render:function(){return null}},y={props:Object.assign({},{recordVariable:{type:String,default:"record"}},i(d.props,["header"]),i(f.props,["records","dataRow","formatter","body"]),i(P,["paginationLinksInFooter"]),b.props,{paginated:{type:Boolean,default:!1},paginateInternally:{type:Boolean,default:!1},totalPages:{type:Number,default:0}}),data:function(){return{currentPageRecords:[],pages:0,page:1}},watch:{currentPage:{handler:function(){this.page=this.currentPage},immediate:!0},totalPages:{handler:function(){this.pages=this.totalPages},immediate:!0},records:{handler:function(){this.currentPageRecords=this.records},immediate:!0},paginated:function(){this.currentPageRecords=this.records}},methods:{handleUpdateTotalPages:function(t){this.pages=t},handleUpdateCurrentPageRecords:function(t){this.currentPageRecords=t,this.$emit("update:currentPageRecords",t)},handleUpdateCurrentPage:function(t){this.page=t,this.$emit("update:currentPage",t)}},render:function(t){var e,a=this.$scopedSlots||{};return this.paginated&&this.paginateInternally&&(e=t(b,{props:Object.assign({},i(this.$props,Object.keys(b.props)),{currentPage:this.page}),on:{"update:totalPages":this.handleUpdateTotalPages,"update:currentPageRecords":this.handleUpdateCurrentPageRecords}})),t("table",{},[e,t(d,{props:i(this.$props,Object.keys(d.props)),scopedSlots:a},[t(r.InheritSlots,{props:{inheritDefaultSlot:!0}})]),t(f,{props:Object.assign({},i(this.$props,Object.keys(f.props)),{records:this.currentPageRecords}),scopedSlots:a},[t(r.InheritSlots,{props:{inheritDefaultSlot:!0}})]),t(P,{props:Object.assign({},i(this.$props,Object.keys(P.props)),{currentPage:this.page,totalPages:this.pages}),on:{"update:currentPage":this.handleUpdateCurrentPage},scopedSlots:a},[t(r.InheritSlots,{props:{inheritDefaultSlot:!0}})])])}},m={install:function(t,e){void 0===e&&(e={}),t.component(e.alias||"TableFor",y)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(m),t.default=m,t.TableFor=y,t.PaginationLinks=h,t}({},VueSlotHooks,VueInheritSlots);
